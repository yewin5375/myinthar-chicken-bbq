<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Myin Thar Roast - Admin Panel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #FF6B35;
            --primary-dark: #E85A2A;
            --bg: #F0F2F5;
            --white: #FFFFFF;
            --text: #2D3436;
            --gray: #8E8E93;
            --success: #4CD964;
        }

        body { font-family: 'Segoe UI', 'Pyidaungsu', sans-serif; background: var(--bg); margin: 0; display: flex; flex-direction: column; height: 100vh; }

        /* Mobile Bottom Nav */
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 15px 0; border-top: 1px solid #ddd; z-index: 1000; }
        .nav-item { color: var(--gray); font-size: 20px; cursor: pointer; text-align: center; }
        .nav-item.active { color: var(--primary); }
        .nav-item span { display: block; font-size: 10px; margin-top: 4px; }

        .header { background: var(--primary); color: white; padding: 20px; text-align: center; position: sticky; top: 0; z-index: 100; }

        .content-section { padding: 20px; padding-bottom: 100px; display: none; }
        .content-section.active { display: block; }

        /* Dashboard Cards */
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px; }
        .stat-card { background: white; padding: 20px; border-radius: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); text-align: center; }
        .stat-card i { font-size: 24px; color: var(--primary); margin-bottom: 10px; }
        .stat-card h3 { margin: 5px 0; font-size: 18px; }
        .stat-card p { margin: 0; color: var(--gray); font-size: 12px; }

        /* Order List */
        .order-card { background: white; padding: 15px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--primary); position: relative; }
        .status-badge { position: absolute; top: 15px; right: 15px; background: #FFF1EB; color: var(--primary); padding: 4px 10px; border-radius: 8px; font-size: 11px; font-weight: bold; }

        /* Product List & Form */
        .form-box { background: white; padding: 20px; border-radius: 20px; margin-bottom: 20px; }
        input, select { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 12px; box-sizing: border-box; }
        .btn-add { width: 100%; background: var(--primary); color: white; border: none; padding: 15px; border-radius: 12px; font-weight: bold; cursor: pointer; }

        .prod-item { display: flex; align-items: center; background: white; padding: 10px; border-radius: 15px; margin-bottom: 10px; gap: 15px; }
        .prod-img { width: 50px; height: 50px; border-radius: 10px; object-fit: cover; }
    </style>
</head>
<body>

<div class="header">
    <h2 style="margin:0">Admin Dashboard</h2>
</div>

<div id="dash" class="content-section active">
    <div class="stat-grid">
        <div class="stat-card">
            <i class="fas fa-shopping-bag"></i>
            <h3 id="total-orders">0</h3>
            <p>စုစုပေါင်းအော်ဒါ</p>
        </div>
        <div class="stat-card">
            <i class="fas fa-money-bill-wave"></i>
            <h3 id="total-sales">0 K</h3>
            <p>စုစုပေါင်းရောင်းအား</p>
        </div>
    </div>
    <h3>လက်ရှိအော်ဒါများ</h3>
    <div id="admin-order-list"></div>
</div>

<div id="prods" class="content-section">
    <div class="form-box">
        <h3 style="margin-top:0">မီနူးအသစ်ထည့်ရန်</h3>
        <input type="text" id="p-name" placeholder="အမည် (ဥပမာ- ကြက်သားကင်)">
        <input type="number" id="p-price" placeholder="ဈေးနှုန်း (ဥပမာ- ၅၀၀၀)">
        <select id="p-cat">
            <option value="ကြက်">ကြက်သား</option>
            <option value="ဆိတ်">ဆိတ်သား</option>
            <option value="အခြား">အခြား</option>
        </select>
        <input type="text" id="p-img" placeholder="ပုံ Link (URL)">
        <button class="btn-add" onclick="addProduct()">မီနူးအသစ်သိမ်းမည်</button>
    </div>

    <h3>မီနူးစာရင်း</h3>
    <div id="admin-prod-list"></div>
</div>

<div class="nav-bar">
    <div class="nav-item active" onclick="showTab('dash', this)">
        <i class="fas fa-chart-line"></i>
        <span>Dashboard</span>
    </div>
    <div class="nav-item" onclick="showTab('prods', this)">
        <i class="fas fa-utensils"></i>
        <span>Menu</span>
    </div>
</div>

<script>
    // Initial Data
    let products = JSON.parse(localStorage.getItem('menuData')) || [
        { id: 1, name: 'ကြက်ပေါင်', price: 4000, category: 'ကြက်', image: 'https://via.placeholder.com/150' },
        { id: 3, name: 'ဆိတ်သားကင်', price: 1500, category: 'ဆိတ်', image: 'https://i.ibb.co/twQjTScV/IMG-20251231-003231.png' }
    ];

    function showTab(tabId, el) {
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        el.classList.add('active');
        if(tabId === 'dash') renderDashboard();
        if(tabId === 'prods') renderProducts();
    }

    function renderDashboard() {
        const orders = JSON.parse(localStorage.getItem('recentOrders') || "[]");
        document.getElementById('total-orders').innerText = orders.length;
        
        let sales = orders.reduce((sum, o) => sum + parseInt(o.total.replace(/,/g, '')), 0);
        document.getElementById('total-sales').innerText = sales.toLocaleString() + " K";

        document.getElementById('admin-order-list').innerHTML = orders.reverse().map(o => `
            <div class="order-card">
                <div class="status-badge">New</div>
                <b>${o.id.toString().slice(-6)}</b><br>
                <small>${o.date}</small>
                <div style="margin-top:10px; border-top: 1px dashed #eee; padding-top:10px;">
                    ${o.total}
                </div>
            </div>
        `).join('');
    }

    function renderProducts() {
        document.getElementById('admin-prod-list').innerHTML = products.map(p => `
            <div class="prod-item">
                <img src="${p.image}" class="prod-img">
                <div style="flex:1">
                    <b>${p.name}</b><br>
                    <small style="color:var(--primary)">${p.price.toLocaleString()} K</small>
                </div>
                <i class="fas fa-trash" style="color:red" onclick="deleteProduct(${p.id})"></i>
            </div>
        `).join('');
        localStorage.setItem('menuData', JSON.stringify(products));
    }

    function addProduct() {
        const name = document.getElementById('p-name').value;
        const price = document.getElementById('p-price').value;
        const cat = document.getElementById('p-cat').value;
        const img = document.getElementById('p-img').value || 'https://via.placeholder.com/150';

        if(!name || !price) return alert("အချက်အလက်ပြည့်စုံစွာဖြည့်ပါ");

        const newProd = {
            id: Date.now(),
            name: name,
            price: parseInt(price),
            category: cat,
            image: img
        };

        products.push(newProd);
        renderProducts();
        alert("မီနူးအသစ် ထည့်သွင်းပြီးပါပြီ");
        
        // Clear inputs
        document.getElementById('p-name').value = '';
        document.getElementById('p-price').value = '';
    }

    function deleteProduct(id) {
        if(confirm("ဖျက်မှာ သေချာပါသလား?")) {
            products = products.filter(p => p.id !== id);
            renderProducts();
        }
    }

    window.onload = () => {
        renderDashboard();
        renderProducts();
    };
</script>

</body>
</html>

